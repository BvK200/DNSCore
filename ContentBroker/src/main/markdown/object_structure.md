## SIP
The basic structure of a SIP as accepted by the system looks like this:

    mySIP.(tgz|zip|tar)
        mySIP/
        	bag-info.txt
        	bagit.txt
        	manifest-md5.txt
        	tagmanifest-md5.txt
        	data/
        		premis.xml
        		someData1.x
        		subfolder/someData.x
        		
Inside a container of one of the supported container formats there is
a single entry which resembles the filename of the container without the extension.
Inside this first level entry you will find exactly five entries. Four of them
are text files which are required by BagIt and then you have one data folder.
Inside the data folder there must be at least one file which is the premis.xml.
The premis.xml, which adheres to a standard described (elsewhere TODO) contains
some object specific rights settings which will control the publication settings
for the object. In addition to the premis.xml the user is free to put any data
of any formats and in any structure (hierarchical ordering in folders) into the 
data folder though some formats and structures are somewhat more supported than
others as we'll see soon (TODO).

TODO SIP builder
TODO mets ist doch nicht mehr unterst√ºtzt oder?

## SIP - special formats

In addition to the basic SIP format the are some metadata formats/structures which are
supported in a special way, optimized for the publication feature of DNSCore.

### METS

### EAD

### EAD / METS

### XMP

    data/
        premis.xml
        abc1.tif
        abc1.xmp
        abc2.tif
        abc2.xmp
        cde1.jpg
        subfolder/abc3.tif
        subfolder/abc3.xmp
        subfolder/cde1.jpg

The system will recognize the correspondence of files and sidecar-files by matching filenames ignoring
the extension of the file. In the example this would mean that we have three pairs (abc1,abc2,abc3) of
file and sidecar file.


### LIDO

## AIP

After passing the ingest workflow of the ContentBroker, a SIP gets converted
to a new structure which contains the original data from the SIP as well as
data automatically generated by the system. 
The whole content which means the user generated content as well as the content
generated by the user gets repacked into a single container and then put
onto long term archival storage media. A container which corresponds to the AIP
in OAIS terms could look like this, for example:

    [oid].pack_1.tar
        [oid].pack_1/
        	bag-info.txt
        	bagit.txt
        	manifest-md5.txt
        	tagmanifest-md5.txt
        	data/
        		2014_01_03+12_15+a/premis.xml
        		2014_01_03+12_15+a/abc.jpg
        		2014_01_03+12_15+a/cde.tif
        		2014_01_03+12_15+a/subfolder/fgh.jpg
        		2014_01_03+12_15+b/premis.xml
        		2014_01_03+12_15+b/abc.tif
        		2014_01_03+12_15+b/subfolder/fgh.tif
        		
Here one has to note several details:

#### oid, package name, bagit, tar

#### Representations -- Restructuring contents with representations

In each package there are
exactly two representations. This also applies to delta packages which belong logically to the same object but
are physically separeted for now. The more complex case when different packages are consolidated is topic of
another paragraph in this document (merge deltas). Both representations start with an encoding of the actual
date and time which allows the system to allow alphabetical ordering to facilitate working with them (see also
the packages in work area section TODO). In addition to that the first representation then is always 
suffixed with +a, while the second one is always suffixed with +b. Hence they are also called the a-representation
and b-representation or a- and b-rep for short. 

The a-rep always contains the original contents delivered by
the user. This means all of the contents of the data folder of the original SIP are simply moved to the a-rep, of course
even preserving their original hierarchical ordering in subfolders, if existent in the original data set.
No modifications are made to any of the original files. This ensures you always can come back to unaltered contents
in case any of the modifications made while processing the data turned out to be destructive in any way. 

The b-rep then contains modified versions of the original files. In certain cases (TODO - rdf) it even can contain
new entirely system generated files.

Here an explanation for each of the newly generated files:

        		2014_01_03+12_15+b/premis.xml
        		
A premis file gets regenerated every time a package passes one of the workflows of the ContentBroker which lead
to a new AIP. This means every time an alteration (more correct: addition) to the material destined for long term
preservation gets made. It contains the events explaining the changes and the object history which the systems
collects from different resources (file system, database, original premis files).
        		
        		2014_01_03+12_15+b/abc.tif
        		2014_01_03+12_15+b/subfolder/fgh.tif 
        		
But wait, for one original file there is no new version in the b-rep. We are speaking of
        		
        		2014_01_03+12_15+a/cde.tif
        		
TODO this leads to a point: reps not necessarily complete




#### premis.xml

#### preserved folder structure        		
        		


### AIP with additions (Deltas)

    [oid].pack_2.tar
        [oid].pack_2/
        	bag-info.txt
        	bagit.txt
        	manifest-md5.txt
        	tagmanifest-md5.txt
        	data/
        		2073_10_10+15_20+a/premis.xml
        		2073_10_10+15_20+a/abc.[fmt_a]
        		2073_10_10+15_20+a/cde.[fmt_b]
        		2073_10_10+15_20+a/subfolder/fgh.[fmt_c]
        		2073_10_10+15_20+b/premis.xml
        		2073_10_10+15_20+b/abc.[fmt_c]
        		2073_10_10+15_20+b/subfolder/fgh.[fmt_c]

### Packages in WorkArea



### Merge Deltas

Though not yet implemented, there are plans to let the system automatically
consolidate package contents to a new package in certain intervals so that
all the data constituting an object will come together at a single place on
the storage media.

    [oid].pack_3.tar
        [oid].pack_3/
        	bag-info.txt
        	bagit.txt
        	manifest-md5.txt
        	tagmanifest-md5.txt
        	data/
        		2014_01_03+12_15+a/premis.xml
        		2014_01_03+12_15+a/abc.[fmt_a]
        		2014_01_03+12_15+a/cde.[fmt_b]
        		2014_01_03+12_15+a/subfolder/fgh.[fmt_c]
        		2014_01_03+12_15+b/premis.xml
        		2014_01_03+12_15+b/abc.[fmt_c]
        		2014_01_03+12_15+b/subfolder/fgh.[fmt_c]
        		2073_10_10+15_20+a/premis.xml
        		2073_10_10+15_20+a/abc.[fmt_a]
        		2073_10_10+15_20+a/cde.[fmt_b]
        		2073_10_10+15_20+a/subfolder/fgh.[fmt_c]
        		2073_10_10+15_20+b/premis.xml
        		2073_10_10+15_20+b/abc.[fmt_c]
        		2073_10_10+15_20+b/subfolder/fgh.[fmt_c]
        		

## DIP

### Substitution rules and surface view of an object

### DIPs

### PIPs

        	