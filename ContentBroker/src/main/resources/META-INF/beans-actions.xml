<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:util="http://www.springframework.org/schema/util" xmlns:task="http://www.springframework.org/schema/task"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/util
           http://www.springframework.org/schema/util/spring-util-3.0.xsd
           http://www.springframework.org/schema/task
           http://www.springframework.org/schema/task/spring-task-3.0.xsd">
          
	<bean class="de.uzk.hki.da.format.CLIFormatIdentifier" id="pronomFormatIdentifier">
         <property name="conversionScript" value="fido.sh"/>
         <property name="healthCheckTestFile" value="conf/healthCheck.tif"/>
         <property name="healthCheckExpectedOutcome" value="fmt/353"/>
    </bean>
    <bean class="de.uzk.hki.da.format.CLIFormatIdentifier" id="videoCodecFormatIdentifier">
         <property name="conversionScript" value="ffmpeg.sh"/>
         <property name="healthCheckTestFile" value="conf/healthCheck.avi"/>
         <property name="healthCheckExpectedOutcome" value="cinepak"/>
    </bean>
          

          
    <!-- BEGIN Use Case Ingest BEGIN -->
	<bean id="IngestUnpackAction" class="de.uzk.hki.da.cb.UnpackAction"
		scope="prototype">
		<property name="startStatus" value="110" />
		<property name="endStatus" value="120" />
		<property name="name" value="IngestUnpackAction" />
		<property name="gridRoot" ref="${grid.implementation}"/>
		<property name="loadBalancer" ref="loadBalancer" />
		<property name="unwantedFilesFilters">
			<util:list value-type="org.apache.commons.io.filefilter.IOFileFilter">
				<bean class="org.apache.commons.io.filefilter.WildcardFileFilter">
					<constructor-arg value="__MACOSX"/>
				</bean>
				<util:constant static-field="org.apache.commons.io.filefilter.HiddenFileFilter.HIDDEN"/>
			</util:list>
		</property>
	</bean>
	<bean id="IngestScanAction" class="de.uzk.hki.da.cb.ScanAction" scope="prototype">
		<property name="startStatus" value="120" />
		<property name="endStatus" value="140" />
		<property name="name" value="IngestScanAction" />
		<property name="formatScanService" ref="formatScanService" />
		<property name="sidecarExtensions" value="${cb.sidecar_extensions}" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
	</bean>
	<bean id="IngestRegisterURNAction" class="de.uzk.hki.da.cb.RegisterURNAction" scope="prototype">
		<property name="startStatus" value="140" />
		<property name="endStatus" value="230" />
		<property name="name" value="IngestRegisterURNAction" />
		<property name="nameSpace" value="${cb.urnNameSpace}" />
	</bean>
	<bean id="IngestConvertAction" class="de.uzk.hki.da.cb.ConvertAction"
		scope="prototype">
		<property name="startStatus" value="230" />
		<property name="endStatus" value="250" />
		<property name="name" value="IngestConvertAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
	</bean>
	<bean id="IngestUpdateMetadataAction" class="de.uzk.hki.da.cb.UpdateMetadataAction" scope="prototype">
		<property name="startStatus" value="250" />
		<property name="endStatus" value="260" />
		<property name="name" value="IngestUpdateMetadataAction" />
		<property name="updateMetadataService" ref="updateMetadataService" />
	</bean>
	<bean id="IngestCheckFormatsAction" class="de.uzk.hki.da.cb.CheckFormatsAction" scope="prototype">
		<property name="startStatus" value="260" />
		<property name="endStatus" value="270" />
		<property name="name" value="IngestCheckFormatsAction" />
		<property name="formatScanService" ref="formatScanService" />
		<property name="jhoveScanService" ref="jhoveScanService" />
		<property name="sidecarExtensions" value="${cb.sidecar_extensions}" />
	</bean>
	<bean id="IngestCreatePremisAction" class="de.uzk.hki.da.cb.CreatePremisAction" scope="prototype">
		<property name="startStatus" value="270" />
		<property name="endStatus" value="310" />
		<property name="name" value="IngestCreatePremisAction" />
		<property name="jhoveScanService" ref="jhoveScanService" />
	</bean>
	<bean id="IngestScanForPresentationAction" class="de.uzk.hki.da.cb.ScanForPresentationAction" scope="prototype">
		<property name="startStatus" value="310" />
		<property name="endStatus" value="320" />
		<property name="name" value="IngestScanForPresentationAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="formatScanService" ref="formatScanService" />
		<property name="sidecarExtensions" value="${cb.sidecar_extensions}" />
	</bean>
	<bean id="IngestConvertForPresentationAction" class="de.uzk.hki.da.cb.ConvertAction"
		scope="prototype">
		<property name="startStatus" value="320" />
		<property name="endStatus" value="330" />
		<property name="name" value="IngestConvertForPresentationAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
	</bean>
	<bean id="IngestPreprocessForPresentationAction" class="de.uzk.hki.da.cb.PreprocessForPresentationAction" scope="prototype">
		<property name="startStatus" value="330" />
		<property name="endStatus" value="340" />
		<property name="name" value="IngestScanForPresentationAction" />
	</bean>
	<bean id="IngestShortenFileNamesAction" class="de.uzk.hki.da.cb.ShortenFileNamesAction"
		scope="prototype">
		<property name="startStatus" value="340" />
		<property name="endStatus" value="350" />
		<property name="name" value="IngestShortenFileNamesAction" />
	</bean>
	<bean id="IngestPresUpdateMetadataAction" class="de.uzk.hki.da.cb.UpdateMetadataAction" scope="prototype">
		<property name="startStatus" value="350" />
		<property name="endStatus" value="360" />
		<property name="name" value="IngestUpdateMetadataAction" />
		<property name="updateMetadataService" ref="updateMetadataService" />
		<property name="writePackageTypeToDC" value="true" />
		<property name="repNames">
			<util:list>
				<value>dip/public</value>
				<value>dip/institution</value>
			</util:list>
		</property>
		<property name="absUrlPrefix" value="${uris.file}"/>
	</bean>
	<bean id="IngestPrepareSendToPresenterAction" class="de.uzk.hki.da.cb.PrepareSendToPresenterAction" scope="prototype">
		<property name="startStatus" value="360" />
		<property name="endStatus" value="370" />
		<property name="name" value="IngestPrepareSendToPresenterAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
	</bean>
	<bean id="IngestBuildAIPAction" class="de.uzk.hki.da.cb.BuildAIPAction" scope="prototype">
		<property name="startStatus" value="370" />
		<property name="endStatus" value="380" />
		<property name="name" value="IngestBuildAIPAction" />
	</bean>
	<bean id="IngestTarAction" class="de.uzk.hki.da.cb.TarAction" scope="prototype">
		<property name="startStatus" value="380" />
		<property name="endStatus" value="400" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="name" value="IngestTarAction" />
	</bean>
	<bean id="IngestArchiveReplicationAction" class="de.uzk.hki.da.cb.ArchiveReplicationAction"
		scope="prototype">
		<property name="startStatus" value="400" />
		<property name="endStatus" value="440" />
		<property name="name" value="IngestArchiveReplicationAction" />
		<property name="gridRoot" ref="${grid.implementation}"/>
	</bean>
	<bean id="IngestArchiveReplicationCheckAction" class="de.uzk.hki.da.cb.ArchiveReplicationCheckAction"
		scope="prototype">
		<property name="startStatus" value="440" />
		<property name="endStatus" value="500" />
		<property name="minNodes" value="${cb.min_repls}" />
		<property name="timeOut" value="2000" />
		<property name="gridRoot" ref="${grid.implementation}"/>
		<property name="name" value="IngestArchiveReplicationCheckAction" />
		<property name="dipNode">
			<ref bean="dipNode" />
		</property>
	</bean>
	<!-- END Use Case Ingest END -->



	
	
	
	<bean id="FriendshipConversionAction" class="de.uzk.hki.da.cb.FriendshipConversionAction"
		scope="prototype">
		<property name="startStatus" value="580" />
		<property name="endStatus" value="590" />
		<property name="name" value="FriendshipConversionAction" />
		<property name="irodsSystemConnector" ref="irodsSystemConnector" />
	</bean>
	
	
	
	
	
	
	<bean id="AuditAction" class="de.uzk.hki.da.cb.AuditAction"
		scope="prototype">
		<property name="startStatus" value="5000" />
		<property name="endStatus" value="6000" />
		<property name="minNodes" value="${cb.min_repls}" />
		<property name="nodeAdminEmail" value="${localNode.admin_email}" />
		<property name="gridRoot" ref="${grid.implementation}"/>
		<property name="name" value="AuditAction" />
	</bean>
	
	
	
	<!--  BEGIN UseCase Retrieval BEGIN -->
	<bean id="RetrievalObjectToWorkAreaAction" class="de.uzk.hki.da.cb.ObjectToWorkAreaAction"
		scope="prototype">
		<property name="startStatus" value="900" />
		<property name="endStatus" value="910" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="gridFacade" ref="${grid.implementation}"/>
		<property name="name" value="RetrievalObjectToWorkAreaAction" />
		<property name="loadBalancer" ref="loadBalancer" />
	</bean>	
	<bean id="RetrievalAction" class="de.uzk.hki.da.cb.RetrievalAction"
		scope="prototype">
		<property name="startStatus" value="910" />
		<property name="endStatus" value="950" />
        <property name="irodsZonePath" value="${irods.zone}" />
		<property name="name" value="RetrievalAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="sidecarExtensions" value="${cb.sidecar_extensions}" />
	</bean>	
	<bean id="PostRetrievalAction" class="de.uzk.hki.da.cb.PostRetrievalAction"
		scope="prototype">
		<property name="startStatus" value="960" />
		<property name="endStatus" value="970" />
		<property name="irodsSystemConnector" ref="irodsSystemConnector" />
		<property name="name" value="PostRetrievalAction" />
	</bean>	
	<!--  END UseCase Retrieval END -->
	
	
	
	
	
	
	<!-- BEGIN UseCase PIPCreation BEGIN -->
	<bean id="PIPGenObjectToWorkAreaAction" class="de.uzk.hki.da.cb.ObjectToWorkAreaAction"
		scope="prototype">
		<property name="startStatus" value="700" />
		<property name="endStatus" value="710" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="gridFacade" ref="${grid.implementation}"/>
		<property name="name" value="PIPGenObjectToWorkAreaAction" />
		<property name="loadBalancer" ref="loadBalancer" />
	</bean>	
	<bean id="PIPGenScanForPresentationAction" class="de.uzk.hki.da.cb.ScanForPresentationAction" scope="prototype">
		<property name="startStatus" value="710" />
		<property name="endStatus" value="720" />
		<property name="name" value="PIPGenScanForPresentationAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="formatScanService" ref="formatScanService" />
		<property name="sidecarExtensions" value="${cb.sidecar_extensions}" />
	</bean>
	<bean id="PIPGenConvertAction" class="de.uzk.hki.da.cb.ConvertAction"
		scope="prototype">
		<property name="startStatus" value="720" />
		<property name="endStatus" value="730" />
		<property name="name" value="PIPGenConvertAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
	</bean>
	<bean id="PIPGenPreprocessForPresentationAction" class="de.uzk.hki.da.cb.PreprocessForPresentationAction" scope="prototype">
		<property name="startStatus" value="730" />
		<property name="endStatus" value="740" />
		<property name="name" value="IngestScanForPresentationAction" />
	</bean>
	<bean id="PIPGenShortenFileNamesAction" class="de.uzk.hki.da.cb.ShortenFileNamesAction"
		scope="prototype">
		<property name="startStatus" value="740" />
		<property name="endStatus" value="750" />
		<property name="name" value="PIPGenShortenFileNamesAction" />
	</bean>
	<bean id="PIPGenUpdateMetadataAction" class="de.uzk.hki.da.cb.UpdateMetadataAction" scope="prototype">
		<property name="startStatus" value="750" />
		<property name="endStatus" value="760" />
		<property name="name" value="PIPGenUpdateMetadataAction" />
		<property name="updateMetadataService" ref="updateMetadataService" />
		<property name="writePackageTypeToDC" value="true" />
		<property name="repNames">
			<util:list>
				<value>dip/public</value>
				<value>dip/institution</value>
			</util:list>
		</property>
	</bean>
	<bean id="PIPGenPrepareSendToPresenterAction" class="de.uzk.hki.da.cb.PrepareSendToPresenterAction" scope="prototype">
		<property name="startStatus" value="760" />
		<property name="endStatus" value="770" />
		<property name="name" value="PIPGenPrepareSendToPresenterAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
	</bean>
	<bean id="PIPGenCleanWorkAreaAction" class="de.uzk.hki.da.cb.CleanWorkAreaAction" scope="prototype">
		<property name="startStatus" value="770" />
		<property name="endStatus" value="799" />
		<property name="name" value="PIPGenCleanWorkAreaAction" />
		<property name="distributedConversionAdapter" ref="${implementation.distributedConversion}" />
		<property name="dipNode">
			<ref bean="dipNode" />
		</property>
	</bean>
	<!-- END UseCase PIPCreation END -->
</beans>
